"use strict";(self.webpackChunkwydatnik=self.webpackChunkwydatnik||[]).push([[17,739,761],{2017:(e,t,r)=>{r.r(t),r.d(t,{default:()=>k});var n=r(7294),a=r(8216),o=r(381),c=r.n(o),l=r(7254),i=r(9024),u=(r(6450),r(7755));function s(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,a,o=[],c=!0,l=!1;try{for(r=r.call(e);!(c=(n=r.next()).done)&&(o.push(n.value),!t||o.length!==t);c=!0);}catch(e){l=!0,a=e}finally{try{c||null==r.return||r.return()}finally{if(l)throw a}}return o}}(e,t)||function(e,t){if(e){if("string"==typeof e)return f(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?f(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function f(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}const d=function(e){var t=e.data,r=(0,u.Z)(),a=s((0,n.useState)(400),2),o=a[0],c=a[1],i=s((0,n.useState)(400),2),f=i[0],d=i[1],m=s((0,n.useState)(100),2),y=m[0],p=m[1],h=s((0,n.useState)(150),2),g=h[0],v=h[1],b=s((0,n.useState)(1),2),E=b[0],w=b[1];(0,n.useEffect)((function(){"smartphone"===r?(c(350),d(325),p(75),v(125),w(1.15)):"smartphone-small"===r&&(c(300),d(200),p(50),v(75),w(2)),S()}),[]),(0,n.useEffect)((function(){S()}),[t]),(0,n.useEffect)((function(){S()}),[o]),(0,n.useEffect)((function(){"smartphone"===r?(c(350),d(325),p(75),v(125),w(1.15)):"smartphone-small"===r&&(c(300),d(200),p(50),v(75),w(2))}),[r]);var S=function(){var e=d3.scaleSequential().interpolator(d3.interpolateCool).domain([0,t.length]);d3.select("#pie-container").select("svg").remove();var r=d3.select("#pie-container").append("svg").attr("width",o+y).attr("height",f).append("g").attr("transform","translate(".concat(2.5*y,", ").concat(2*y,")")),n=d3.arc().innerRadius(0).outerRadius(g),a=d3.pie().padAngle(0).value((function(e){return e.amount})),c=r.selectAll("arc").data(a(t)).enter().append("g").attr("class","arc");c.append("path").attr("d",n).style("fill",(function(t,r){return e(r)})).style("0","#000000").style("stroke-width",0),c.append("text").attr("text-anchor","middle").attr("x",(function(e){var t=e.startAngle+(e.endAngle-e.startAngle)/2-Math.PI/2;return e.cx=105*Math.cos(t),(e.x=180*Math.cos(t))/E})).attr("y",(function(e){var t=e.startAngle+(e.endAngle-e.startAngle)/2-Math.PI/2;return e.cy=105*Math.sin(t),(e.y=180*Math.sin(t))/E})).text((function(e){return(0,l.Ru)(e.data.category)})).style("font-size","15px").style("fill","#000000").each((function(e){var t=this.getBBox();e.sx=e.x-t.width/2-2,e.ox=e.x+t.width/2+2,e.sy=e.oy=e.y+5})),c.append("defs").append("marker").attr("id","circ").attr("markerWidth",6).attr("markerHeight",6).attr("refX",3).attr("refY",3).append("circle").style("fill","#383838").attr("cx",3).attr("cy",3).attr("r",3),c.append("path").attr("class","pointer").style("fill","none").style("stroke","#383838").attr("marker-end","url(#circ)").attr("d",(function(e){return e.cx>e.ox?"M"+e.sx/E+","+e.sy/E+"L"+e.ox/E+","+e.oy/E+" "+e.cx/E+","+e.cy/E:"M"+e.ox/E+","+e.oy/E+"L"+e.sx/E+","+e.sy/E+" "+e.cx/E+","+e.cy/E}))};return n.createElement("div",{id:"pie-container"})};function m(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,a,o=[],c=!0,l=!1;try{for(r=r.call(e);!(c=(n=r.next()).done)&&(o.push(n.value),!t||o.length!==t);c=!0);}catch(e){l=!0,a=e}finally{try{c||null==r.return||r.return()}finally{if(l)throw a}}return o}}(e,t)||function(e,t){if(e){if("string"==typeof e)return y(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?y(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function y(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}const p=function(e){var t=e.data,r=e.categories,a="desktop"===(0,u.Z)(),o="tablet"===(0,u.Z)(),c="smartphone"===(0,u.Z)(),i=m((0,n.useState)(null),2),s=i[0],f=i[1],d=a?800:o?650:400,y=a?180:o?240:300,p=d3.max(t,(function(e){return(t=e[1])?Math.max.apply(0,Object.values(t)):0;var t})),h=d3.timeParse("%m/%Y"),g=d3.scaleTime().domain(d3.extent(t,(function(e){return h(e[0])}))).range([0,d]),v=d3.scaleLinear().domain([0,p]).range([y,0]),b=function(e){return d3.line().x((function(e){return g(h(e[0]))})).y((function(t){return t[1]&&e&&t[1][e]?v(t[1][e]):v(0)})).curve(d3.curveLinear)(Array.from(t))};return n.createElement("div",{id:"line-container"},n.createElement("svg",{viewBox:"-50 -50 ".concat(d+50+50," ").concat(y+50+50),onMouseMove:function(e){var r=d3.bisector((function(e){return h(e[0])})).center,n=g.invert(d3.clientPoint(e.target,e)[0]),a=r(Array.from(t),n,0);f(a)},onMouseLeave:function(){f(null)}},n.createElement("g",{className:"axis",ref:function(e){var t=d3.axisLeft(v).tickSize(-d).tickPadding(7);d3.select(e).call(t)}}),n.createElement("g",{className:"axis xAxis",ref:function(e){var r=d3.axisBottom(g);d3.select(e).call(r.tickFormat(d3.timeFormat("%m/%Y"))).call(r.tickSize(c?"2rem":"1em")).call(r.ticks(t.size-1))},transform:"translate(0,".concat(y+5,")")}),!!t&&t.size>0&&!!r&&r.map((function(e){return n.createElement("path",{key:"path-".concat(e),strokeWidth:1,fill:"none",stroke:(0,l.G3)(e),d:b(e)})})),n.createElement("text",{fill:"#666",fontSize:c?"2rem":"1em",transform:"rotate(-90)",x:0-y/2,y:-50,dy:"1em"},"PLN"),Array.from(t).map((function(e,t){var r=m(e,2),a=r[0],o=r[1];return t===s&&Array.from(new Map(Object.entries(o))).map((function(e){var t=m(e,2),r=t[0],o=t[1];return n.createElement("g",{key:"".concat(a,"-").concat(r)},n.createElement("text",{fill:"#666",x:g(h(a)),y:v(Number(o)+8),textAnchor:"middle"},o),n.createElement("circle",{cx:g(h(a)),cy:v(Number(o)),r:2,fill:"#891EBB",strokeWidth:2,stroke:"#891EBB",style:{transition:"ease-out .1s"}}))}))}))))};var h=r(9739),g=r(7761);function v(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function b(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?v(Object(r),!0).forEach((function(t){E(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):v(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function E(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function w(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,a,o=[],c=!0,l=!1;try{for(r=r.call(e);!(c=(n=r.next()).done)&&(o.push(n.value),!t||o.length!==t);c=!0);}catch(e){l=!0,a=e}finally{try{c||null==r.return||r.return()}finally{if(l)throw a}}return o}}(e,t)||S(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function S(e,t){if(e){if("string"==typeof e)return x(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?x(e,t):void 0}}function x(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}const k=(0,a.$j)((function(e){return{expenses:e.expenses}}),null)((function(e){var t=e.expenses,r=w((0,n.useState)([]),2),a=r[0],o=r[1],u=w((0,n.useState)(c()().startOf("month")),2),s=u[0],f=u[1],m=w((0,n.useState)(c()().endOf("month")),2),y=m[0],v=m[1],k=w((0,n.useState)(c()().subtract(1,"months").startOf("month")),2),A=k[0],D=k[1],O=w((0,n.useState)(c()().endOf("month")),2),M=O[0],Y=O[1],C=w((0,n.useState)([]),2),j=C[0],N=C[1],P=w((0,n.useState)([]),2),I=P[0],z=P[1],B=[];(0,n.useEffect)((function(){L()}),[]),(0,n.useEffect)((function(){L()}),[s,y]),(0,n.useEffect)((function(){j.length>0?R():z([])}),[j,A,M]);var F=function(e,r){return t.filter((function(t){var n=c()(t.date,"DD/MM/YYYY").isSameOrAfter(e),a=c()(t.date,"DD/MM/YYYY").isSameOrBefore(r);return n&&a}))},L=function(){var e=F(s,y);B=(0,l.CP)().map((function(t){return{category:t,amount:e.reduce((function(e,r){return r.category==t?e+(Number.parseFloat(r.amount)||0):e}),0)}})).filter((function(e){return 0!=e.amount})),o(B)},R=function(){var e=F(A,M).filter((function(e){return j.includes(e.category)})).sort((function(e,t){return(0,i.a)(e.date,t.date)}));z(function(e){var t=(0,i.x)(A,M),r=new Map;return t.forEach((function(t){var n;j.length>0&&(n=j.reduce((function(r,n){return b(b({},r),{},E({},n,e.reduce((function(e,r){return function(e,t,r,n){return t.date.substring(t.date.indexOf("/")+1)===n&&t.category===r?e+t.amount:e}(e,r,n,t)}),0)))}),{})),r.set(t,n)})),r}(e))};return n.createElement("div",{className:"subpage__body container"},n.createElement("div",{className:"chart-container"},n.createElement("h2",null,"Porównanie proporcji wydatków między"," ",c()(s).format("DD-MM-YYYY")," a"," ",c()(y).format("DD-MM-YYYY")),n.createElement("form",null,n.createElement(h.default,{startDate:s,endDate:y,setStartDate:f,setEndDate:v})),0!==a.length?n.createElement(d,{data:a}):n.createElement("p",null,"Brak wydatków w wybranym czasie.")),n.createElement("div",{className:"chart-container"},n.createElement("h2",null,"Porównanie wydatków w kategoriach między"," ",c()(A).format("DD-MM-YYYY")," a"," ",c()(M).format("DD-MM-YYYY")),n.createElement("form",null,n.createElement(h.default,{startDate:A,endDate:M,setStartDate:D,setEndDate:Y}),n.createElement(g.default,{selectedCategories:j,handleSelectCategory:function(e){var t;N([].concat(function(e){if(Array.isArray(e))return x(e)}(t=j)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(t)||S(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),[e]))},handleUnselectCategory:function(e){return N(j.filter((function(t){return t!==e})))}})),j.length>0&&0!==I.length?n.createElement(p,{data:I,categories:j}):n.createElement("p",null,"Brak wydatków dla podanych kryteriów.")))}))},7761:(e,t,r)=>{r.r(t),r.d(t,{default:()=>l});var n=r(7294),a=r(7254),o=r(6450),c=n.lazy((function(){return r.e(424).then(r.bind(r,1424))}));const l=function(e){var t=e.selectedCategories,r=e.handleSelectCategory,l=e.handleUnselectCategory;return n.createElement(n.Suspense,{fallback:n.createElement(o.Z,null)},n.createElement("fieldset",{className:"categories-container"},n.createElement("label",null,"Wybierz kategorię:"),(0,a.CP)().map((function(e){return n.createElement("div",{className:"category__checkbox",key:e},n.createElement("input",{id:e,type:"checkbox",className:"hidden",name:"category",value:e,onChange:function(e){1==e.target.checked?r(e.target.value):l(e.target.value)},checked:t.includes(e)}),n.createElement("label",{htmlFor:e},n.createElement(c,{category:e,clickable:!0,isChosen:t.includes(e)})))}))))}},9739:(e,t,r)=>{r.r(t),r.d(t,{default:()=>c});var n=r(7294),a=r(6141);function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}const c=function(e){var t,r,c=e.startDate,l=e.endDate,i=e.setStartDate,u=e.setEndDate,s=(t=(0,n.useState)(null),r=2,function(e){if(Array.isArray(e))return e}(t)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,a,o=[],c=!0,l=!1;try{for(r=r.call(e);!(c=(n=r.next()).done)&&(o.push(n.value),!t||o.length!==t);c=!0);}catch(e){l=!0,a=e}finally{try{c||null==r.return||r.return()}finally{if(l)throw a}}return o}}(t,r)||function(e,t){if(e){if("string"==typeof e)return o(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?o(e,t):void 0}}(t,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),f=s[0],d=s[1];return n.createElement("fieldset",{className:"date-picker"},n.createElement("label",null,"Wybierz zakres dat:"),n.createElement(a.DateRangePicker,{startDate:c,startDateId:"startDateId",endDate:l,endDateId:"endDateId",onDatesChange:function(e){var t=e.startDate,r=e.endDate;i(t.startOf("day")),u(r.startOf("day"))},focusedInput:f,onFocusChange:function(e){return d(e)},numberOfMonths:1,isOutsideRange:function(){return!1}}))}},7254:(e,t,r)=>{r.d(t,{G3:()=>a,Ru:()=>o,CP:()=>c});var n=[{name:"groceries",displayedName:"Spożywcze",colorClass:"blue",color:"#0185FF"},{name:"alcohol",displayedName:"Alkohol",colorClass:"navy",color:"#3139a8"},{name:"drugstore",displayedName:"Chemia",colorClass:"turquise",color:"#04CABE"},{name:"home",displayedName:"Dom",colorClass:"yellow",color:"#FFC701"},{name:"gifts",displayedName:"Prezenty",colorClass:"pink",color:"#a03b9b"},{name:"goouts",displayedName:"Wyjścia",colorClass:"red",color:"#9b2d3b"},{name:"car",displayedName:"Samochód",colorClass:"orange",color:"#936032"},{name:"flowers",displayedName:"Kwiaty",colorClass:"green",color:"#048339"}],a=function(e){return n.find((function(t){if(t.name===e)return t})).color},o=function(e){return n.find((function(t){if(t.name===e)return t})).displayedName},c=function(){return n.map((function(e){return e.name}))}},9024:(e,t,r)=>{r.d(t,{a:()=>o,x:()=>c});var n=r(381),a=r.n(n),o=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"DD/MM/YYYY";return a()(e,r).isBefore(a()(t,r))?-1:a()(e,r).isAfter(a()(t,r))?1:0},c=function(e,t){for(var r=a()(e),n=[];t>r||r.format("M")===t.format("M");)n.push(r.format("MM/YYYY")),r.add(1,"month");return n}}}]);